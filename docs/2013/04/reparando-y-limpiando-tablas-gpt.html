<!doctype html>
<html lang="en">
    <head>
        <title>Silly Bytes</title>

        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="stylesheet" href="../../css/default.css" />
        <link rel="stylesheet" href="../../css/post-list.css" />
        <link rel="stylesheet" href="../../css/post.css" />

        <link rel="stylesheet" href="../../bower_components/bootstrap/dist/css/bootstrap.min.css" />
        <link rel="stylesheet" href="../../bower_components/highlight/src/styles/solarized-light.css" />

        <script src="../../bower_components/jquery/dist/jquery.min.js"></script>
        <script src="../../bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
        <script src="../../bower_components/highlight/src/highlight.pack.js"></script>

        <script> hljs.initHighlightingOnLoad(); </script>

    </head>
    <body>
        <header class="container-fluid">
            <div class="row">
                <div class="col-xs-12">
                    <a href="../../">
                        <img alt="Silly Bytes" id="logo" class="image-responsive" src="../../img/newcog.png" />
                    </a>
                </div>
            </div>
        </header>

        <div id="blog" class="container-fluid">
            <div class="row">

                <div id="sidebar" class="hidden-xs hidden-sm col-md-3">
                    <div id="author">
                        <img id="author-pic" src="../../img/danie.jpg">
                        <h3 id="author-name">Daniel Campoverde [alx741]</h3>
                        <img id="location-icon" src="../../img/location_icon.png">
                        <span id="location">Cuenca, Ecuador</span>
                    </div>

                    <div id="findme">
                        <h2 class="sidebar-h2">FIND ME</h2>
                        <a target="_blank" href="https://github.com/alx741">
                            <img class="icon" src="../../img/github.png">
                        </a>
                        <a target="_blank" href="https://twitter.com/alx741alx">
                            <img class="icon" src="../../img/twitter.png">
                        </a>
                        <a target="_blank" href="https://www.facebook.com/sillybytes/">
                            <img class="icon" src="../../img/facebook.png">
                        </a>
                        <a target="_blank" href="https://plus.google.com/116038619580828681039">
                            <img class="icon" src="../../img/google.png">
                        </a>
                        <a target="_blank" href="https://www.joindiaspora.com/u/alx741">
                            <img class="icon" src="../../img/diaspora.png">
                        </a>

                        <div id="findme-textual">
                            <b>Freenode:</b> #vim, #archlinux, #avr, #rust, #haskell,
                            #yesod, #zsh, #sillybytes
                            <hr>
                            <b>Mailto:</b> alx@sillybytes.net
                            <br>
                            <b>GPG Key ID:</b> 12622B78
                            <hr>
                            <b>Chat</b> with me <a target="_blank" href="http://webchat.freenode.net/?channels=sillybytes">here</a>
                        </div>


                        <div id="facebook-embed" class="embed-responsive embed-responsive-16by9">
                            <iframe src="//www.facebook.com/plugins/likebox.php?href=https%3A%2F%2Fwww.facebook.com%2Fsillybytes&amp;width&amp;height=290&amp;colorscheme=light&amp;show_faces=true&amp;header=true&amp;stream=false&amp;show_border=true" scrolling="yes" style="border:none; overflow:hidden; height:290px;" allowtransparency="false" frameborder="0"></iframe>
                        </div>
                    </div>


                    <div id="dotfiles">
                        <h2 class="sidebar-h2">DOTFILES</h2>
                        <p>
                            Software configuration, scripts, tools and magic.
                            Be sure to add <b>atribution </b> when using them
                            (fully or partially).
                        </p>
                        <a target="_blank" href="https://github.com/alx741/dotfiles#readme">
                            <img id="dotfiles-img" src="../../img/dotfiles.png">
                        </a>
                    </div>
                </div>


                <div id="content" class="col-xs-12 col-md-9">
                    <div class="row">
    <div class="post col-xs-12">
        <h2 class="post-title">Reparando y limpiando tablas GPT corruptas (Guardando MBR) [WARNING GPT (GUID Partition Table) detected on]</h2>
        <div class="post-date-author">
            Posted on April 29, 2013
            
                by Daniel Campoverde
            
        </div>
        <div class="post-content">
            <p><img src="../../img/mbr/thumbnail.gif" id="thumbnail" /><br />
Hace un par de semanas adquirí un nuevo equipo portátil en el cual he instalado GNU/Linux (Arch) como SO de cabecera, sin embargo mientras lo hacia he dejado un par de particiones lógicas no muy grandes destinadas a instalar algo como FreeBSD, OpenBSD, entre otros.</p>
<p>Pues bien, hoy mientras tenia algo de tiempo y luego de la larga espera para descargar el DVD de FreeBSD me he dispuesto a instalarlo sobre una de mis particiones, pero comenzado el trabajo unos cuantos golpes de la tecla Enter de sobra durante el gestor de particionado del instalador me han dado como resultado la creación de una tabla GPT indeseada y para colmo mal formada, y por supuesto con esto no podía leer mis particiones de la tabla MBR para instalar FreeBSD donde quería hacerlo.</p>
<p>Arranqué mi Arch nuevamente para examinar el problema:</p>
<p>Empecé por revisar como estaba el MBR de mi HDD y <em>fdisk</em> se quejaba de la presencia de una tabla GPT que no podía entender (<em>fdisk</em> no sabe leer GPT).</p>
<!--more-->
<pre><code>$ fdisk -l</code></pre>
<pre><code>WARNING: GPT (GUID Partition Table) detected on '/dev/sda'! The util fdisk
doesn't support GPT. Use GNU Parted.

Disk /dev/sda: 500.1 GB, 500107862016 bytes, 976773168 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Identificador del disco: 0x7ff32c5b

Disposit. Inicio    Comienzo      Fin      Bloques  Id  Sistema
/dev/sda1   *          63   195318269    97659103+  83  Linux
/dev/sda2       195319808   390635519    97657856    7  HPFS/NTFS/exFAT
/dev/sda3       390636540   392596469      979965   82  Linux swap / Solaris
/dev/sda4       392596470   976773167   292088349    5  Extendida
/dev/sda5       392596533   451185524    29294496   9f  BSD/OS
/dev/sda6       451185588   509774579    29294496   83  Linux
/dev/sda7       509774643   568363634    29294496   83  Linux
/dev/sda8       568363698   976773167   204204735   83  Linux</code></pre>
<p>Luego probé con <em>gparted</em>, el cual anunciaba también la presencia de una tabla GPT y me informaba que haría uso de ella, y así era, obtenía un disco con una sola partición!</p>
<h1 id="respaldo">Respaldo</h1>
<p>Antes de meter mano tomaremos precauciones y respaldaremos el MBR de nuestro HDD:</p>
<pre><code># sfdisk -d /dev/sda &gt; recover   (&quot;sda&quot; es nuestro hdd)</code></pre>
<p>Y guardamos el archivo <em>recover</em> en una memoria USB o cualquier otro medio externo (Importante!!)</p>
<h1 id="solución">Solución</h1>
<p>Tan sencillo como eliminar la tabla GPT haciendo uso de <em>gdisk</em></p>
<p>Si no tenemos ya en nuestros sistema instalado <em>gdisk</em> lo instalamos con el gestor de paquetes de nuestra distribución.</p>
<p>Para Arch: <code># pacman -S gdisk</code></p>
<p>Ahora como root:</p>
<pre><code># gdisk</code></pre>
<p>(“&gt;&gt;” consola de gdisk)</p>
<pre><code>&gt;&gt; /dev/sda   (nuestro hdd)</code></pre>
<p><em>gdisk</em> nos preguntará si deseamos examinar el disco con la tabla MBR o GPT, elegimos MBR</p>
<p>Luego:</p>
<pre><code>&gt;&gt; x       (para entrar al modo experto)

&gt;&gt;Expert command: z</code></pre>
<ul>
<li>Nos pedirá confirmación para eliminar GPT (respondemos que si)</li>
<li>Nos preguntará si deseamos eliminar también MBR (respondemos que NO)</li>
</ul>
<p>Una vez echo esto podemos cerrar <em>gdisk</em> y ya tendremos nuestro disco limpio de toda GPT , y si hemos echo todo bien tendremos intacta nuestra tabla MBR.</p>
<p>Si no lo hemos echo bien estaremos en serios problemas, que se podrán solucionar si hemos seguido los pasos de respaldo.</p>
        </div>
    </div>
</div>

                    <div class="row">
                        <div class="col-xs-offset-2 col-xs-8">
                            <a id="archive" href="../../archive.html">Read Older Posts</a>
                        </div>
                    </div>
                </div>

            </div>
        </div>




        <footer>
            <div class="row">

                <div class="col-xs-12 col-md-6">
                    <h4 class="footer-h4">PUBLIC KEY</h4>
                    gpg --keyserver keys.gnupg.net --recv-key 12622B78

                    <h4 class="footer-h4 fspaced">INTERNET DEFENSE LEAGUE</h4>
                    <a target="_blank" href="http://internetdefenseleague.org/">
                        <img id="idl-img" alt="Internet Defesen League" src="../../img/idl.png">
                    </a>
                </div>


                <div class="col-xs-12 col-md-6">
                    <h4 class="footer-h4">FSF</h4>
                    <img id="fsf-img" alt="Free Software Fundation Member" src="../../img/fsf.png">

                    <h4 class="footer-h4 fspaced">HASKELLERS</h4>
                    <a target="_blank" href="http://www.haskellers.com/user/4249">
                        <img id="haskellers-img" alt="I" m a Haskeller' src="../../img/haskellers.png">
                    </a>

                    <h4 class="footer-h4 fspaced">CREATIVE COMMONS</h4>
                    <a target="_blank" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">
                        <img id="cc-img" alt="Creative Commons - SA - BY" src="../../img/cc.png">
                    </a>
                    <p id="cc-text">
                        Silly Bytes by Daniel Alejandro Campoverde Carrión
                        [alx741] is licensed under a
                        <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">
                            Creative Commons Attribution-ShareAlike 3.0 Unported License.
                        </a>
                    </p>
                </div>

            </div>
        </footer>


    </body>
</html>
